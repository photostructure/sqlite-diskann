# clang-format configuration for sqlite-diskann
# Based on LLVM style with C-specific adjustments

BasedOnStyle: LLVM

# Language-specific settings
Language: Cpp
Standard: c++17

# Indentation
IndentWidth: 2
TabWidth: 2
UseTab: Never
ContinuationIndentWidth: 4

# Line length
ColumnLimit: 80

# Alignment
AlignAfterOpenBracket: Align
AlignConsecutiveAssignments: false
AlignConsecutiveDeclarations: false
AlignEscapedNewlines: Right
AlignOperands: true
AlignTrailingComments: true

# Braces
BreakBeforeBraces: Attach
BraceWrapping:
  AfterFunction: false
  AfterControlStatement: false
  AfterStruct: false
  AfterEnum: false

# Spacing
SpaceAfterCStyleCast: false
SpaceBeforeParens: ControlStatements
SpacesInParentheses: false
SpacesInSquareBrackets: false

# Pointers and references (align to variable name, C-style)
PointerAlignment: Right
DerivePointerAlignment: false

# Function arguments
AllowAllArgumentsOnNextLine: true
AllowAllParametersOfDeclarationOnNextLine: true
BinPackArguments: true
BinPackParameters: true

# Includes
SortIncludes: true
IncludeBlocks: Regroup
IncludeCategories:
  # System headers
  - Regex: '^<.*\.h>'
    Priority: 1
  # SQLite headers
  - Regex: '^<sqlite3.*\.h>'
    Priority: 2
  # Project headers
  - Regex: '^".*"'
    Priority: 3

# Misc
AllowShortFunctionsOnASingleLine: None
AllowShortIfStatementsOnASingleLine: false
AllowShortLoopsOnASingleLine: false
KeepEmptyLinesAtTheStartOfBlocks: false
MaxEmptyLinesToKeep: 1
